<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Auto-Indentation Feature in IDLE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/theme/white.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body, .reveal {
            font-family: 'Roboto', sans-serif;
        }
        code {
            background-color: #f5f5f5;
            padding: 2px 4px;
            border-radius: 4px;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
        }
        .fragment {
            transition: transform 0.5s, opacity 0.5s;
        }
        .fragment.visible {
            transform: translateY(0);
            opacity: 1;
        }
        .fragment.hidden {
            transform: translateY(20px);
            opacity: 0;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h1>Auto-Indentation Feature in IDLE</h1>
                <p>Maintaining Consistent Code Formatting</p>
                <p>Presenters: BulldogDevs</p>
            </section>
            <section>
                <h2>Introduction</h2>
                <p>The <strong>Auto-Indentation</strong> feature maintains consistent code formatting by automatically indenting lines based on the context.</p>
                <p>It enhances productivity by reducing the need for manual indentation.</p>
            </section>
            <section>
                <h2>Diagram</h2>
                <svg id="diagram" width="600" height="300"></svg>
                <p>Workflow:</p>
                <ul>
                    <li>User types a new line.</li>
                    <li>The feature analyzes the previous line's indentation.</li>
                    <li>The new line is automatically indented to match the context.</li>
                </ul>
            </section>
            <section>
                <h2>Basic Code Navigation</h2>
                <p>Key Classes and Functions in <code>editor.py</code>:</p>
                <ul>
                    <li><code>EditorWindow.auto_indent</code>: Main function for handling auto-indentation.</li>
                    <li>Helper functions for analyzing the previous line and applying indentation.</li>
                </ul>
            </section>
            <section>
                <h2>Debugging</h2>
                <p>Set breakpoints in key methods:</p>
                <ul>
                    <li><code>auto_indent</code></li>
                    <li>Helper functions</li>
                </ul>
                <p>Step through the code execution to understand how the previous line is analyzed and the new line is indented.</p>
            </section>
            <section>
                <h2>Unit Tests</h2>
                <p>Key Tests in <code>idlelib/idle_test/test_auto_indent.py</code>:</p>
                <ul>
                    <li>Test auto-indenting after various code constructs.</li>
                    <li>Test handling of edge cases, such as comments and multiline strings.</li>
                </ul>
                <p>Run the tests to validate the auto-indentation feature.</p>
            </section>
            <section>
                <h2>Experimental Change</h2>
                <p>Make a small change to the feature, such as improving the indentation logic for specific constructs.</p>
                <p>Show how this change affects the functionality and user experience.</p>
            </section>
            <section>
                <h2>Sand-boxing</h2>
                <p>Create a standalone script that implements basic auto-indentation functionality.</p>
                <pre><code>import re
import tkinter as tk

class EditorWindow(tk.Tk):
    def __init__(self):
        super().__init__()
        self.title("IDLE Editor - Auto-Indentation Feature")
        self.text_widget = tk.Text(self, wrap="word")
        self.text_widget.pack(expand=1, fill="both")
        self.text_widget.bind("<Return>", self.auto_indent)
    
    def auto_indent(self, event):
        """Automatically indent the new line based on the previous line's indentation."""
        widget = self.text_widget
        current_line = widget.index("insert").split(".")[0]
        previous_line = str(int(current_line) - 1)
        
        previous_line_text = widget.get(f"{previous_line}.0", f"{previous_line}.end")
        indentation = re.match(r"\s*", previous_line_text).group()
        
        widget.insert("insert", f"\n{indentation}")
        return "break"

if __name__ == "__main__":
    app = EditorWindow()
    app.mainloop()</code></pre>
            </section>
            <section>
                <h2>Q&A Preparation</h2>
                <p>Be ready to answer questions about implementation details, handling of different indentation scenarios, and performance.</p>
                <p>Have questions prepared for the other group's presentation.</p>
            </section>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.3.1/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.1.1/d3.min.js"></script>
    <script>
        Reveal.initialize({
            transition: 'slide', // none/fade/slide/convex/concave/zoom
            fragments: true
        });

        // Create a diagram using D3.js
        const svg = d3.select("#diagram");
        const width = +svg.attr("width");
        const height = +svg.attr("height");

        const stages = [
            {text: "User types new line", x: 50, y: 50},
            {text: "Analyze previous line's indentation", x: 300, y: 50},
            {text: "Auto-indent new line", x: 550, y: 50}
        ];

        svg.selectAll("circle")
            .data(stages)
            .enter()
            .append("circle")
            .attr("cx", d => d.x)
            .attr("cy", d => d.y)
            .attr("r", 20)
            .attr("fill", "#3498db")
            .transition()
            .duration(1000)
            .delay((d, i) => i * 500)
            .attr("r", 40);

        svg.selectAll("text")
            .data(stages)
            .enter()
            .append("text")
            .attr("x", d => d.x)
            .attr("y", d => d.y)
            .attr("dy", ".35em")
            .attr("text-anchor", "middle")
            .attr("fill", "#ffffff")
            .text(d => d.text)
            .style("opacity", 0)
            .transition()
            .duration(1000)
            .delay((d, i) => i * 500)
            .style("opacity", 1);
    </script>
</body>
</html>
